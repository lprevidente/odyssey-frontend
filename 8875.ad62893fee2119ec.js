"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8875],{8875:(I,_,l)=>{l.r(_),l.d(_,{AuthModule:()=>G});var v=l(6814),d=l(2436),r=l(95),w=l(4664),e=l(9212),b=l(3721),P=l(7061),g=l(63),h=l(3860),i=l(1929);let C=(()=>{var t;class a{constructor(o,n,c,u,m,p){this._formBuilder=o,this._authService=n,this._meService=c,this._router=u,this._loadingService=m,this._toastSavingService=p,this.showPassword=!1,this.form=this._formBuilder.nonNullable.group({email:["",[r.kI.required,r.kI.email]],password:["",r.kI.required]})}login(){this.form.invalid||(this._loadingService.showLoading(),this._authService.login(this.form.getRawValue()).subscribe({next:()=>this._meService.getMe().pipe((0,w.w)(()=>this._router.navigateByUrl("/tabs"))).subscribe(()=>this.form.reset()),error:()=>this._toastSavingService.showErrorWithMessage("Wrong credentials.")}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(b.e),e.Y36(P.w),e.Y36(d.F0),e.Y36(g.b),e.Y36(h.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:45,vars:5,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","formControlName","email","label","Email","labelPlacement","stacked","fill","outline","errorText","Please enter a valid email"],["mode","md","formControlName","password","label","Password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],[1,"mb-1","forgot-password"],["size","small","routerLink","/auth/password-forgot"],["type","submit","expand","block","color","primary",1,"m0-auto",3,"click"],[1,"divider"],[1,"social-media"],["expand","block"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","4"],["x1","21.17","x2","12","y1","8","y2","8"],["x1","3.95","x2","8.54","y1","6.06","y2","14"],["x1","10.88","x2","15.46","y1","21.94","y2","14"],["d","M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"],["d","M10 2c1 .5 2 2 2 5"],[1,"mt-2"],["size","small","routerLink","/auth/signup",1,"signup"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Log in"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Log in"),e.qZA()()(),e.TgZ(9,"p",4),e._uU(10,"Log in to start planning your next trip."),e.qZA(),e.TgZ(11,"form",5),e._UZ(12,"ion-input",6),e.TgZ(13,"ion-input",7)(14,"ion-button",8),e.NdJ("click",function(){return n.showPassword=!n.showPassword}),e._UZ(15,"ion-icon",9),e.qZA()(),e.TgZ(16,"ion-buttons",10)(17,"ion-button",11),e._uU(18," Forgot Password? "),e.qZA()(),e.TgZ(19,"ion-button",12),e.NdJ("click",function(){return n.login()}),e._uU(20," Continue "),e.qZA()(),e.TgZ(21,"div",13)(22,"span"),e._uU(23,"or"),e.qZA()(),e.TgZ(24,"div",14)(25,"ion-button",15),e.O4$(),e.TgZ(26,"svg",16),e._UZ(27,"path",17),e.qZA(),e._uU(28," Continue with Facebook "),e.qZA(),e.kcU(),e.TgZ(29,"ion-button",15),e.O4$(),e.TgZ(30,"svg",16),e._UZ(31,"circle",18)(32,"circle",19)(33,"line",20)(34,"line",21)(35,"line",22),e.qZA(),e._uU(36," Continue with Google "),e.qZA(),e.kcU(),e.TgZ(37,"ion-button",15),e.O4$(),e.TgZ(38,"svg",16),e._UZ(39,"path",23)(40,"path",24),e.qZA(),e._uU(41," Continue with Apple "),e.qZA()(),e.kcU(),e.TgZ(42,"ion-buttons",25)(43,"ion-button",26),e._uU(44," You don't have an account? Sign up! "),e.qZA()()()),2&o&&(e.Q6J("translucent",!1),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("type",n.showPassword?"text":"password"),e.xp6(2),e.Q6J("name",n.showPassword?"eye":"eye-off"))},dependencies:[d.rH,i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.wd,i.sr,i.j9,i.YI,r._Y,r.JJ,r.JL,r.sg,r.u],styles:['.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-dark)}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--ion-color-light)}.divider[_ngcontent-%COMP%]:before{margin-right:.5rem}.divider[_ngcontent-%COMP%]:after{margin-left:.5rem}.signup[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]{text-decoration:underline;color:var(--ion-color-primary)}.signup[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 0 0 auto;--padding-start: 0px}.social-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:.5rem}.social-media[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-dark)}.social-media[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px}'],changeDetection:0}),a})();var f=l(8046);let k=(()=>{var t;class a{constructor(o,n,c,u,m){this._formBuilder=o,this._authService=n,this._router=c,this._loadingService=u,this._toastSavingService=m,this.showPassword=!1,this.form=this._formBuilder.nonNullable.group({firstName:["",r.kI.required],lastName:["",r.kI.required],email:["",[r.kI.required,r.kI.email]],sex:["M",r.kI.required],password:["",[r.kI.required,r.kI.pattern(f.L)]],confirmPassword:["",r.kI.required]},{validators:f.C})}submit(){this.form.invalid?this.form.hasError("passwordMismatch")&&this._toastSavingService.showErrorWithMessage("The passwords don't match."):(this._loadingService.showLoading(),this._authService.signup(this.form.getRawValue()).subscribe({next:()=>{this.form.reset(),this._router.navigateByUrl("/auth/verification")},error:o=>{"email_already_exist"===o.error.title?this._toastSavingService.showErrorWithMessage("Already registered with this email."):this._toastSavingService.showError()}}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(b.e),e.Y36(d.F0),e.Y36(g.b),e.Y36(h.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-signup"]],decls:32,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","type","text","formControlName","firstName","label","First Name","labelPlacement","stacked","fill","outline"],["mode","md","type","text","formControlName","lastName","label","Last Name","labelPlacement","stacked","fill","outline"],["mode","md","type","email","formControlName","email","label","Email","labelPlacement","stacked","fill","outline"],["mode","md","fill","outline","labelPlacement","stacked","label","Sex","formControlName","sex"],["value","M"],["value","F"],["value","O"],["mode","md","formControlName","password","label","Password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],[1,"hint"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm Password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Sign up"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Sign up"),e.qZA()()(),e.TgZ(11,"p",6),e._uU(12,"Create an account and start planning your next trip."),e.qZA(),e.TgZ(13,"form",7),e._UZ(14,"ion-input",8)(15,"ion-input",9)(16,"ion-input",10),e.TgZ(17,"ion-select",11)(18,"ion-select-option",12),e._uU(19,"Male"),e.qZA(),e.TgZ(20,"ion-select-option",13),e._uU(21,"Female"),e.qZA(),e.TgZ(22,"ion-select-option",14),e._uU(23,"Other"),e.qZA()(),e.TgZ(24,"ion-input",15)(25,"ion-button",16),e.NdJ("click",function(){return n.showPassword=!n.showPassword}),e._UZ(26,"ion-icon",17),e.qZA()(),e.TgZ(27,"ion-text",18),e._uU(28," The password must have one uppercase letter, one lowercase letter, one number and one special character. "),e.qZA(),e._UZ(29,"ion-input",19),e.TgZ(30,"ion-button",20),e.NdJ("click",function(){return n.submit()}),e._uU(31," Sign up "),e.qZA()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("formGroup",n.form),e.xp6(11),e.Q6J("type",n.showPassword?"text":"password"),e.xp6(2),e.Q6J("name",n.showPassword?"eye":"eye-off"))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.t9,i.n0,i.yW,i.wd,i.sr,i.QI,i.j9,i.oU,r._Y,r.JJ,r.JL,r.sg,r.u],changeDetection:0}),a})();var Z=l(4925),y=l(9862);let T=(()=>{var t;class a{constructor(o,n){this._httpClient=o,this._basePath=n,this._endpoint=`${this._basePath}/v1/user/confirmation-email`}getConfirmationEmail(){return this._httpClient.get(this._endpoint)}verifyIdentity(o){return this._httpClient.post(this._endpoint,o)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.LFG(y.eN),e.LFG(Z.GW))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),a})(),x=(()=>{var t;class a{constructor(o,n,c,u,m,p){this._formBuilder=o,this._meService=n,this._verificationService=c,this._router=u,this._loadingService=m,this._toastSavingService=p,this.form=this._formBuilder.nonNullable.group({code:["",r.kI.pattern(/^[0-9]{6}$/)]}),this._verificationService.getConfirmationEmail().subscribe()}submit(){this.form.invalid||(this._loadingService.showLoading(),this._verificationService.verifyIdentity(this.form.getRawValue()).subscribe({next:()=>this._meService.getMe().pipe((0,w.w)(()=>this._router.navigateByUrl("/tabs"))).subscribe(()=>this.form.reset()),error:o=>this._handleError(o)}).add(()=>this._loadingService.hideLoading()))}_handleError(o){"confirmation_code_not_valid"===o.error.title?this._toastSavingService.showErrorWithMessage("The code is not valid. Please try again."):this._toastSavingService.showError()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(P.w),e.Y36(T),e.Y36(d.F0),e.Y36(g.b),e.Y36(h.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-verification"]],decls:20,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","medium"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","type","text","formControlName","code","label","Verification code","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Confirm your identity"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Insert the code"),e.qZA()()(),e.TgZ(11,"p",6),e._uU(12," Hey there! Could you please enter the code we've sent to your "),e.TgZ(13,"b"),e._uU(14,"email"),e.qZA(),e._uU(15,"? It's just to make sure it's really you. "),e.qZA(),e.TgZ(16,"form",7),e._UZ(17,"ion-input",8),e.TgZ(18,"ion-button",9),e.NdJ("click",function(){return n.submit()}),e._uU(19," Verify "),e.qZA()()()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("formGroup",n.form))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.pK,i.wd,i.sr,i.j9,i.oU,r._Y,r.JJ,r.JL,r.sg,r.u],changeDetection:0}),a})();var U=l(9505),A=l(5619);let S=(()=>{var t;class a{constructor(o,n){this._httpClient=o,this._basePath=n,this._endpoint=`${this._basePath}/v1/user/password`}getResetPasswordCode(o){return this._httpClient.post(`${this._endpoint}/reset-code`,o)}resetPassword(o){return this._httpClient.post(`${this._endpoint}/reset`,o)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.LFG(y.eN),e.LFG(Z.GW))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();function q(t,a){1&t&&(e.TgZ(0,"p",7)(1,"b"),e._uU(2,"Great job!"),e.qZA(),e._uU(3," We've just sent a link to your email. Please check your inbox and follow the instructions to reset your password. You'll be back in no time! "),e.qZA())}function J(t,a){if(1&t){const s=e.EpF();e.TgZ(0,"p",7),e._uU(1," We're here to help! Please type in your email address. We'll promptly send you a link to reset your password. Hang tight! "),e.qZA(),e.TgZ(2,"form",8),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.resetCode())}),e._UZ(3,"ion-input",9),e.TgZ(4,"ion-button",10),e._uU(5," Send Reset Code "),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.form)}}function Y(t,a){if(1&t){const s=e.EpF();e.TgZ(0,"p",6),e._uU(1," Almost there! Now, please create a new password. Make sure it's something secure that you'll remember. Let's get you back on track! "),e.qZA(),e.TgZ(2,"form",7),e.NdJ("ngSubmit",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.resetPassword())}),e.TgZ(3,"ion-input",8)(4,"ion-button",9),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.showPassword=!n.showPassword)}),e._UZ(5,"ion-icon",10),e.qZA()(),e._UZ(6,"ion-input",11),e.TgZ(7,"ion-button",12),e._uU(8," Confirm "),e.qZA()()}if(2&t){const s=e.oxw();e.xp6(2),e.Q6J("formGroup",s.form),e.xp6(1),e.Q6J("type",s.showPassword?"text":"password"),e.xp6(2),e.Q6J("name",s.showPassword?"eye":"eye-off")}}function N(t,a){1&t&&(e.TgZ(0,"p",6),e._uU(1," Oops! It seems like we couldn't find a code to reset your password. Please make sure you've entered the correct code that we sent to your email. If you're still having trouble, don't worry! You can request a new code and we'll send it right away. Hang in there! "),e.qZA())}const L=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:C},{path:"signup",component:k},{path:"password-forgot",component:(()=>{var t;class a{constructor(o,n,c,u){this._formBuilder=o,this._loadingService=n,this._toastSavingService=c,this._resetPasswordService=u,this.sent$=new A.X(!1),this.form=this._formBuilder.nonNullable.group({email:["",[r.kI.required,r.kI.email]]})}resetCode(){this.form.invalid||(this._loadingService.showLoading(),this._resetPasswordService.getResetPasswordCode(this.form.getRawValue()).subscribe({next:()=>this.sent$.next(!0),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(g.b),e.Y36(h.c),e.Y36(S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-forgot"]],decls:14,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],["class","subtitle"],[1,"subtitle"],[1,"form",3,"formGroup","ngSubmit"],["mode","md","type","email","formControlName","email","label","Email","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Forgot Password?"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Forgot Password?"),e.qZA()()(),e.YNc(11,q,4,0,"p",6),e.ALo(12,"async"),e.YNc(13,J,6,1),e.qZA()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(5),e.um2(11,e.lcZ(12,3,n.sent$)?11:13))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.pK,i.wd,i.sr,i.j9,i.oU,r._Y,r.JJ,r.JL,r.sg,r.u,v.Ov],changeDetection:0}),a})()},{path:"reset-password",component:(()=>{var t;class a{constructor(o,n,c,u,m,p){this._formBuilder=o,this._router=n,this._activatedRouter=c,this._loadingService=u,this._toastSavingService=m,this._resetPasswordService=p,this.showPassword=!1,this.code=this._activatedRouter.snapshot.queryParams.code,this.form=this._formBuilder.nonNullable.group({password:["",[r.kI.required,r.kI.pattern(f.L)]],confirmPassword:["",r.kI.required]},{validators:f.C})}resetPassword(){this.form.invalid||(this._loadingService.showLoading(),this._resetPasswordService.resetPassword({...this.form.getRawValue(),code:this.code}).subscribe({next:()=>this._router.navigateByUrl("/auth/login").then(()=>this.form.reset()),error:o=>this._handleError(o)}).add(()=>this._loadingService.hideLoading()))}_handleError(o){400===o.status?this._toastSavingService.showErrorWithMessage("Invalid reset code"):this._toastSavingService.showError()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(d.F0),e.Y36(d.gz),e.Y36(g.b),e.Y36(h.c),e.Y36(S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-forgot"]],decls:13,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup","ngSubmit"],["mode","md","autocomplete","new-password","formControlName","password","label","New password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary"]],template:function(o,n){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Reset password"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Reset Password"),e.qZA()()(),e.YNc(11,Y,9,3)(12,N,2,0),e.qZA()),2&o&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(5),e.um2(11,n.code?11:12))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.wd,i.sr,i.j9,i.oU,r._Y,r.JJ,r.JL,r.sg,r.u],changeDetection:0}),a})()},{path:"verification",canActivate:[U.S],component:x}];let F=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(L),d.Bz]}),a})(),G=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,F,i.Pc,r.UX]}),a})()}}]);