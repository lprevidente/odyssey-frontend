<ion-modal
  [presentingElement]="presentingElement"
  [isOpen]="isModalOpen()"
  (willDismiss)="close()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start"></ion-buttons>
        <ion-title>Fuel Your Journey</ion-title>

        <!-- Close button -->
        <ion-buttons slot="end">
          <ion-button
            (click)="close()"
            [strong]="true">
            Close
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content class="ion-padding">
      <p class="text-gray-800 dark:text-gray-400 text-justify">
        Add Dining Destinations to Your Travel Planner
      </p>

      <form
        (ngSubmit)="addActivity()"
        [formGroup]="form"
        class="form">
        <!-- Name -->
        <ion-input
          class="mt-4"
          mode="md"
          fill="outline"
          label="Label"
          labelPlacement="stacked"
          type="text"
          formControlName="name"
          placeholder="Dinner at Odyssey Restaurant">
        </ion-input>

        <app-poi-autocomplete
          label="Place"
          formControlName="place"
          placeholder="Odyssey Restaurant"
          [latitude]="place().position.lat"
          [longitude]="place().position.lng">
        </app-poi-autocomplete>

        <!-- Reservation -->
        <ion-toggle
          formControlName="reservation"
          class="w-full text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
          mode="md">
          Do you have a reservation?
        </ion-toggle>

        @if (form.controls["reservation"].value) {
          <div class="mt-2 flex flex-row items-center">
            <label
              class="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 flex-grow">
              At what time?
            </label>
            <ion-datetime-button
              mode="md"
              datetime="fromTime">
            </ion-datetime-button>

            <ion-modal [keepContentsMounted]="true">
              <ng-template>
                <ion-datetime
                  presentation="time"
                  id="fromTime">
                </ion-datetime>
              </ng-template>
            </ion-modal>
          </div>
        }

        <!-- Note -->
        <ion-textarea
          class="mt-2.5"
          rows="3"
          mode="md"
          labelPlacement="stacked"
          label="Add a note"
          formControlName="notes"
          fill="outline"
          placeholder="It has some vegetarian dishies">
        </ion-textarea>

        <!-- Link To Restaurant -->
        <ion-input
          mode="md"
          fill="outline"
          label="Link to restaurant"
          labelPlacement="stacked"
          type="text"
          formControlName="link"
          placeholder="https://odysseyrestaurant.com">
          <ion-icon
            name="clipboard"
            slot="end"
            (click)="pasteFromClipboard()">
          </ion-icon>
        </ion-input>

        <ion-button
          type="submit"
          expand="block"
          class="mt-4"
          color="primary">
          Add
        </ion-button>
      </form>
    </ion-content>
  </ng-template>
</ion-modal>
