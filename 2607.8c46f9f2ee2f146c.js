"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2607],{2607:(J,C,c)=>{c.r(C),c.d(C,{ProfilePageModule:()=>Y});var i=c(8974),f=c(177),l=c(4341),u=c(8160),k=c(467),M=c(983),e=c(4438),m=c(8673),h=c(1626);let g=(()=>{var n;class a{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/profile`}getProfile(){return this._httpClient.get(this._endpoint)}updateProfile(t){return this._httpClient.put(this._endpoint,t)}deleteProfile(){return this._httpClient.delete(this._endpoint)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(h.Qq),e.KVO(m.o2))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var b=c(3769),S=c(4412),y=c(8141),v=c(1413);let j=(()=>{var n;class a{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/avatar`}uploadAvatar(t){const o=new FormData;return o.append("file",t),this._httpClient.post(this._endpoint,o,{responseType:"text"})}deleteAvatar(){return this._httpClient.delete(this._endpoint)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(h.Qq),e.KVO(m.o2))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var _=c(9596);const x=["fileInput"];let O=(()=>{var n;class a{constructor(t,o){this._avatarService=t,this._toastSavingService=o,this.imageChanged=new e.bkB,this.openActions$=new v.B,this.profilePictureUrl$=new v.B,this._profile={}}get actionSheetButtons(){const t=[{text:"Upload",role:"upload"},{text:"Cancel",role:"cancel"}];return this._profile.avatarURL?[{text:"Delete",role:"destructive"},...t]:t}openActionSheet(){this.openActions$.next(!0)}ngOnInit(){this.profile$.pipe((0,y.M)(t=>this._profile=t)).subscribe(()=>this._avatarURL())}actionResult(t){"destructive"===t.detail.role?this._avatarService.deleteAvatar().subscribe({next:()=>{this._toastSavingService.showSaved(),this.profilePictureUrl$.next(this._getAvatarPlaceholder())},error:()=>this._toastSavingService.showError()}):"upload"===t.detail.role&&this.changeAvatar(),this.openActions$.next(!1)}_avatarURL(){var t;const o=null!==(t=this._profile.avatarURL)&&void 0!==t?t:this._getAvatarPlaceholder();this.profilePictureUrl$.next(o)}_getAvatarPlaceholder(){return`https://ui-avatars.com/api/?name=${this._profile.firstName}+${this._profile.lastName}&size=256&background=${"F"===this._profile.sex?"FFC0CB":"87CEEB"}`}changeAvatar(){this._fileInput.nativeElement.click()}onFileSelected(t){const o=t.target.files[0];o&&this._avatarService.uploadAvatar(o).subscribe({next:s=>{this._toastSavingService.showSaved(),this.profilePictureUrl$.next(s)},error:()=>this._toastSavingService.showError()})}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(j),e.rXU(_.J))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-avatar"]],viewQuery:function(t,o){if(1&t&&e.GBs(x,5),2&t){let s;e.mGM(s=e.lsd())&&(o._fileInput=s.first)}},inputs:{profile$:"profile$",size:"size"},outputs:{imageChanged:"imageChanged"},decls:9,vars:11,consts:[["fileInput",""],[1,"avatar-container","ion-activatable",3,"click"],["alt","avatar",1,"avatar-image",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["name","pencil",1,"edit-icon"],["header","Actions",3,"didDismiss","isOpen","buttons"]],template:function(t,o){if(1&t){const s=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){return e.eBV(s),e.Njj(o.openActionSheet())}),e.nrm(1,"ion-ripple-effect")(2,"img",2),e.nI1(3,"async"),e.j41(4,"input",3,0),e.bIt("change",function(d){return e.eBV(s),e.Njj(o.onFileSelected(d))}),e.k0s(),e.nrm(6,"ion-icon",4),e.k0s(),e.j41(7,"ion-action-sheet",5),e.nI1(8,"async"),e.bIt("didDismiss",function(d){return e.eBV(s),e.Njj(o.actionResult(d))}),e.k0s()}2&t&&(e.xc7("width",o.size)("height",o.size),e.R7$(2),e.Y8G("src",e.bMT(3,7,o.profilePictureUrl$),e.B4B),e.R7$(5),e.Y8G("isOpen",!0===e.bMT(8,9,o.openActions$))("buttons",o.actionSheetButtons))},dependencies:[i.wC,i.iq,i.S7,f.Jj],styles:[".avatar-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;cursor:pointer}.avatar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:95%;height:95%;border-radius:50%;object-fit:cover;box-shadow:0 2px 4px #0000001a}.avatar-container[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;position:absolute;bottom:2px;right:0;background-color:#fff;border-radius:50%;padding:4px;font-size:16px;color:#333}"]}),a})();function U(n,a){if(1&n&&(e.j41(0,"ion-text")(1,"p",3),e.EFF(2),e.k0s(),e.j41(3,"p",4),e.EFF(4),e.k0s()()),2&n){const r=a;e.R7$(2),e.SpI(" ",r.firstName+" "+r.lastName," "),e.R7$(2),e.JRh(r.email)}}let E=(()=>{var n;class a{constructor(t){this._profileService=t,this.profile$=new S.t({}),this.profilePictureUrl$=new S.t(""),this._getProfile()}_getProfile(){this._profileService.getProfile().pipe((0,y.M)(t=>this._avatarURL(t))).subscribe(t=>this.profile$.next(t))}_avatarURL(t){const o=t.avatarURL||this._getAvatarPlaceholder(t);this.profilePictureUrl$.next(o)}_getAvatarPlaceholder(t){return`https://ui-avatars.com/api/?name=${t.firstName}+${t.lastName}&size=256&background=${"F"===t.sex?"FFC0CB":"87CEEB"}`}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(g))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-profile-info"]],decls:5,vars:4,consts:[[1,"profile-container"],[1,"profile-info"],["size","60px",3,"profile$"],[1,"full-name"],[1,"see-profile"]],template:function(t,o){if(1&t&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"app-avatar",2),e.DNE(3,U,5,2,"ion-text"),e.nI1(4,"async"),e.k0s()()),2&t){let s;e.R7$(2),e.Y8G("profile$",o.profile$),e.R7$(),e.vxM(3,(s=e.bMT(4,2,o.profile$))?3:-1,s)}},dependencies:[i.IO,O,f.Jj],styles:['.profile-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{flex:1 auto}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{margin-bottom:0!important}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   .see-profile[_ngcontent-%COMP%]{margin-top:5px!important;color:var(--ion-color-medium-tint)}.profile-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:25.6px;margin-right:10px}.profile-container[_ngcontent-%COMP%]{padding:15px}.profile-container[_ngcontent-%COMP%]:after{margin-top:5px;content:"";display:block;border-bottom:1px solid var(--ion-color-light)}'],changeDetection:0}),a})(),A=(()=>{var n;class a{constructor(t,o,s){this._profileService=t,this._authService=o,this._router=s,this.profile$=M.w}ionViewWillEnter(){this.profile$=this._profileService.getProfile()}logout(){var t=this;return(0,k.A)(function*(){t._authService.logout().subscribe().add(()=>t._router.navigate(["/auth/login"]))})()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(g),e.rXU(b.u),e.rXU(u.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],decls:36,vars:2,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],["routerLink","/tabs/profile/personal-information"],["name","person-circle-outline"],["routerLink","/tabs/profile/notifications"],["name","notifications-outline"],["routerLink","/tabs/profile/app-settings"],["name","settings-outline"],["routerLink","/tabs/profile/security"],["name","shield-outline"],[1,"footer"],["slot","end",1,"logout"],[3,"click"],[1,"app-version"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Profile"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e.EFF(8,"Profile"),e.k0s()()(),e.nrm(9,"app-profile-info"),e.j41(10,"ion-list")(11,"ion-list-header")(12,"ion-label"),e.EFF(13,"Settings"),e.k0s()(),e.j41(14,"ion-item",4),e.nrm(15,"ion-icon",5),e.j41(16,"ion-label"),e.EFF(17,"Personal Information"),e.k0s()(),e.j41(18,"ion-item",6),e.nrm(19,"ion-icon",7),e.j41(20,"ion-label"),e.EFF(21,"Notifications"),e.k0s()(),e.j41(22,"ion-item",8),e.nrm(23,"ion-icon",9),e.j41(24,"ion-label"),e.EFF(25,"App Settings"),e.k0s()(),e.j41(26,"ion-item",10),e.nrm(27,"ion-icon",11),e.j41(28,"ion-label"),e.EFF(29,"Security"),e.k0s()()(),e.j41(30,"div",12)(31,"ion-buttons",13)(32,"ion-button",14),e.bIt("click",function(){return o.logout()}),e.EFF(33,"Logout"),e.k0s()(),e.j41(34,"p",15),e.EFF(35,"App Version 1.0.0"),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.iq,i.uz,i.he,i.nf,i.AF,i.BC,i.ai,i.N7,u.Wk,E],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}.footer[_ngcontent-%COMP%]{padding:30px 15px}.footer[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{text-decoration:underline;color:var(--ion-color-primary)}.footer[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 0px}.footer[_ngcontent-%COMP%]   .app-version[_ngcontent-%COMP%]{margin-top:30px;font-weight:200;font-size:12px;color:var(--ion-color-medium)!important}"]}),a})();var P=c(6279);let $=(()=>{var n;class a{constructor(t,o,s,p){this._formBuilder=t,this._profileService=o,this._loadingService=s,this._toastSavingService=p,this.form=this._formBuilder.nonNullable.group({firstName:["",l.k0.required],lastName:["",l.k0.required],email:["",[l.k0.required,l.k0.email]],sex:new l.MJ("M",{nonNullable:!0,validators:l.k0.required})}),this._profileService.getProfile().subscribe(d=>this.form.patchValue(d))}saveChanges(){this.form.invalid||(this._loadingService.showLoading(),this._profileService.updateProfile(this.form.getRawValue()).subscribe({next:()=>this._toastSavingService.showSaved(),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading()))}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(l.ok),e.rXU(g),e.rXU(P.U),e.rXU(_.J))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-personal-information"]],decls:26,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"ngSubmit","formGroup"],["mode","md","formControlName","firstName","label","First name","labelPlacement","stacked","fill","outline"],["mode","md","formControlName","lastName","label","Last name","labelPlacement","stacked","fill","outline"],["mode","md","formControlName","email","type","email","label","Email","labelPlacement","stacked","errorText","Enter a valid email","fill","outline"],["mode","md","fill","outline","labelPlacement","stacked","label","Sex","formControlName","sex"],["value","M"],["value","F"],["value","O"],["type","submit","expand","block","color","primary",1,"mt-1"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Personal Info"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Personal info"),e.k0s()()(),e.j41(11,"p",6),e.EFF(12," Here there are your personal information, that you can edit. "),e.k0s(),e.j41(13,"form",7),e.bIt("ngSubmit",function(){return o.saveChanges()}),e.nrm(14,"ion-input",8)(15,"ion-input",9)(16,"ion-input",10),e.j41(17,"ion-select",11)(18,"ion-select-option",12),e.EFF(19,"Male"),e.k0s(),e.j41(20,"ion-select-option",13),e.EFF(21,"Female"),e.k0s(),e.j41(22,"ion-select-option",14),e.EFF(23,"Other"),e.k0s()(),e.j41(24,"ion-button",15),e.EFF(25," Confirm "),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",o.form))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.$w,i.Nm,i.Ip,i.BC,i.ai,i.Je,i.Gw,i.el,l.qT,l.BC,l.cb,l.j4,l.JD]}),a})(),I=(()=>{var n;class a{constructor(){}ngOnInit(){}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-notifications"]],decls:13,vars:2,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Notifications"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Notifications"),e.k0s()()(),e.j41(11,"h5"),e.EFF(12,"Work in progress!"),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0))},dependencies:[i.QW,i.W9,i.eU,i.BC,i.ai,i.el]}),a})(),B=(()=>{var n;class a{constructor(){}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-device-history"]],decls:29,vars:0,consts:[[1,"device-history"],[1,"text-bold"],[1,"device-history-item"],["size","large","name","laptop-outline"],[1,"device"],[1,"operating-system"],[1,"browser"],[1,"location-time"],[1,"location"],[1,"time"],["size","large","name","phone-portrait-outline"]],template:function(t,o){1&t&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Device history"),e.k0s(),e.j41(3,"div",2),e.nrm(4,"ion-icon",3),e.j41(5,"div")(6,"div",4)(7,"p",5),e.EFF(8,"OS X 10.15.7"),e.k0s(),e.j41(9,"p",6),e.EFF(10,"Safari"),e.k0s()(),e.j41(11,"div",7)(12,"span",8),e.EFF(13,"Orta di Atella, Campania"),e.k0s(),e.j41(14,"span",9),e.EFF(15,"Today, 10:30 AM"),e.k0s()()()(),e.j41(16,"div",2),e.nrm(17,"ion-icon",10),e.j41(18,"div")(19,"div",4)(20,"p",5),e.EFF(21,"OS X 10.15.7"),e.k0s(),e.j41(22,"p",6),e.EFF(23,"Safari"),e.k0s()(),e.j41(24,"div",7)(25,"span",8),e.EFF(26,"Orta di Atella, Campania"),e.k0s(),e.j41(27,"span",9),e.EFF(28,"Today, 10:30 AM"),e.k0s()()()()())},dependencies:[i.iq],styles:['@charset "UTF-8";.device-history[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .operating-system[_ngcontent-%COMP%]{font-size:17px;font-weight:700}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .operating-system[_ngcontent-%COMP%]:after{content:"  \\2022   "}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .browser[_ngcontent-%COMP%]{font-weight:200}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]:after{content:"  \\2022   "}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:15px;font-weight:200}'],changeDetection:0}),a})();var F=c(3477),w=c(6354);let T=(()=>{var n;class a{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/password`}getLastUpdatePassword(){return this._httpClient.get(`${this._endpoint}/last-update`)}updatePassword(t){return this._httpClient.put(this._endpoint,t)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(h.Qq),e.KVO(m.o2))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();function R(n,a){if(1&n){const r=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Change Password"),e.k0s(),e.j41(4,"ion-buttons",7)(5,"ion-button",8),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.openModal$.next(!1))}),e.EFF(6,"Close"),e.k0s()()()(),e.j41(7,"ion-content",9)(8,"form",10),e.bIt("ngSubmit",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.changePassword())}),e.nrm(9,"ion-input",11),e.j41(10,"ion-input",12)(11,"ion-button",13),e.bIt("click",function(){e.eBV(r);const o=e.XpG();return e.Njj(o.showPassword=!o.showPassword)}),e.nrm(12,"ion-icon",14),e.k0s()(),e.nrm(13,"ion-input",15),e.j41(14,"ion-button",16),e.EFF(15," Confirm "),e.k0s()()()}if(2&n){const r=e.XpG();e.R7$(8),e.Y8G("formGroup",r.form),e.R7$(2),e.Y8G("type",r.showPassword?"text":"password"),e.R7$(2),e.Y8G("name",r.showPassword?"eye":"eye-off")}}let D=(()=>{var n;class a{constructor(t,o,s,p){this._formBuilder=t,this._loadingService=o,this._passwordService=s,this._toastSavingService=p,this.showPassword=!1,this.lastUpdatePassword$=new v.B,this.openModal$=new v.B,this.form=this._formBuilder.nonNullable.group({oldPassword:["",l.k0.required],password:["",[l.k0.required,l.k0.pattern(F.r)]],confirmPassword:["",l.k0.required]},{validators:F.R}),this._getLasUpdatePassword()}_getLasUpdatePassword(){this._passwordService.getLastUpdatePassword().pipe((0,w.T)(t=>this._timeAgo(t.lastUpdate))).subscribe(t=>this.lastUpdatePassword$.next(t))}_timeAgo(t){const o=Math.floor(((new Date).getTime()-new Date(t).getTime())/1e3);let s=o/31536e3;const p=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return s>1?p.format(-Math.floor(s),"year"):(s=o/2592e3,s>1?p.format(-Math.floor(s),"month"):(s=o/86400,s>1?p.format(-Math.floor(s),"day"):(s=o/3600,s>1?p.format(-Math.floor(s),"hour"):(s=o/60,p.format(-Math.floor(s),s>1?"minute":"second")))))}changePassword(){this.form.invalid?this.form.hasError("passwordMismatch")&&this._toastSavingService.showErrorWithMessage("The passwords don't match."):(this._loadingService.showLoading(),this._passwordService.updatePassword(this.form.getRawValue()).subscribe({next:()=>{this.form.reset(),this._toastSavingService.showSaved(),this.openModal$.next(!1),this._getLasUpdatePassword()},error:t=>{400===t.status?this._toastSavingService.showErrorWithMessage("The old password is incorrect"):this._toastSavingService.showError()}}).add(()=>this._loadingService.hideLoading()))}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(l.ok),e.rXU(P.U),e.rXU(T),e.rXU(_.J))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-last-update-password"]],decls:15,vars:6,consts:[[1,"text-bold"],[1,"mt-2"],[1,"password"],["slot","end",1,"logout"],[1,"underline",3,"click"],[1,"description"],[3,"isOpen"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"form",3,"ngSubmit","formGroup"],["mode","md","autocomplete","password","formControlName","oldPassword","label","Current password","labelPlacement","stacked","fill","outline"],["mode","md","autocomplete","new-password","formControlName","newPassword","label","New password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary"]],template:function(t,o){1&t&&(e.j41(0,"h1",0),e.EFF(1,"Login"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"h5",0),e.EFF(5,"Password"),e.k0s(),e.j41(6,"ion-buttons",3)(7,"ion-button",4),e.bIt("click",function(){return o.openModal$.next(!0)}),e.EFF(8," Change "),e.k0s()()(),e.j41(9,"p",5),e.EFF(10),e.nI1(11,"async"),e.k0s()(),e.j41(12,"ion-modal",6),e.nI1(13,"async"),e.DNE(14,R,16,3,"ng-template"),e.k0s()),2&t&&(e.R7$(10),e.SpI(" Last updated password ",e.bMT(11,2,o.lastUpdatePassword$),". "),e.R7$(2),e.Y8G("isOpen",!0===e.bMT(13,4,o.openModal$)))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.iq,i.$w,i.BC,i.ai,i.Sb,i.Gw,l.qT,l.BC,l.cb,l.j4,l.JD,f.Jj],styles:[".description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.password[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"],changeDetection:0}),a})();var N=c(5558);let G=(()=>{var n;class a{constructor(t,o,s){this._profileService=t,this._authService=o,this._router=s,this.actionSheetButtons=[{text:"Delete",role:"destructive",data:{action:"delete"}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]}deleteProfile(){this._profileService.deleteProfile().pipe((0,N.n)(()=>this._authService.logout()),(0,w.T)(()=>this._router.navigate(["/auth/login"]))).subscribe()}actionResult(t){"destructive"===t.detail.role&&this.deleteProfile()}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(g),e.rXU(b.u),e.rXU(u.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-delete-account"]],decls:10,vars:1,consts:[[1,"text-bold"],[1,"mt-2"],[1,"container"],[1,"description"],["slot","end",1,"logout"],["id","open-action-sheet","color","danger",1,"underline"],["trigger","open-action-sheet","header","Are you sure?",3,"didDismiss","buttons"]],template:function(t,o){1&t&&(e.j41(0,"h1",0),e.EFF(1,"Account"),e.k0s(),e.j41(2,"div",1)(3,"div",2)(4,"p",3),e.EFF(5,"Delete your account"),e.k0s(),e.j41(6,"ion-buttons",4)(7,"ion-button",5),e.EFF(8," Delete "),e.k0s()()()(),e.j41(9,"ion-action-sheet",6),e.bIt("didDismiss",function(p){return o.actionResult(p)}),e.k0s()),2&t&&(e.R7$(9),e.Y8G("buttons",o.actionSheetButtons))},dependencies:[i.wC,i.Jm,i.QW],styles:["description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"],changeDetection:0}),a})(),L=(()=>{var n;class a{constructor(){}}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.VBU({type:n,selectors:[["app-security"]],decls:16,vars:2,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"divider"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Security"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Security"),e.k0s()()(),e.nrm(11,"app-last-update-password")(12,"div",6)(13,"app-device-history")(14,"div",6)(15,"app-delete-account"),e.k0s()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0))},dependencies:[i.QW,i.W9,i.eU,i.BC,i.ai,i.el,B,D,G],styles:['.description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.password[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--ion-color-light)}']}),a})(),V=(()=>{var n;class a{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/app-settings`}getAppSettings(){return this._httpClient.get(this._endpoint)}updateAppSettings(t){return this._httpClient.put(this._endpoint,t)}}return(n=a).\u0275fac=function(t){return new(t||n)(e.KVO(h.Qq),e.KVO(m.o2))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();const X=[{path:"",pathMatch:"full",component:A},{path:"personal-information",component:$},{path:"security",component:L},{path:"notifications",component:I},{path:"app-settings",component:(()=>{var n;class a{constructor(t,o,s,p){this._formBuilder=t,this._loadingService=o,this._toastSavingService=s,this._appSettingsService=p,this.form=this._formBuilder.group({language:["en-US"],currency:["EUR"]}),this._appSettingsService.getAppSettings().subscribe(d=>this.form.patchValue(d))}updateSettings(){this._loadingService.showLoading(),this._appSettingsService.updateAppSettings(this.form.getRawValue()).subscribe({next:()=>this._toastSavingService.showSaved(),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading())}}return(n=a).\u0275fac=function(t){return new(t||n)(e.rXU(l.ok),e.rXU(P.U),e.rXU(_.J),e.rXU(V))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-app-settings"]],decls:26,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"ngSubmit","formGroup"],["mode","md","fill","outline","labelPlacement","stacked","label","Language","formControlName","language"],["value","it-IT"],["value","en-US"],["mode","md","fill","outline","labelPlacement","stacked","label","Currency","formControlName","currency"],["value","EUR"],["value","USD"],["type","submit","expand","block","color","primary",1,"mt-1"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"App settings"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"App settings"),e.k0s()()(),e.j41(11,"p",6),e.EFF(12," Here you can change your app settings, like language and currency "),e.k0s(),e.j41(13,"form",7),e.bIt("ngSubmit",function(){return o.updateSettings()}),e.j41(14,"ion-select",8)(15,"ion-select-option",9),e.EFF(16,"Italian"),e.k0s(),e.j41(17,"ion-select-option",10),e.EFF(18,"English (American)"),e.k0s()(),e.j41(19,"ion-select",11)(20,"ion-select-option",12),e.EFF(21,"\u20ac Euro"),e.k0s(),e.j41(22,"ion-select-option",13),e.EFF(23,"$ US Dollar"),e.k0s()(),e.j41(24,"ion-button",14),e.EFF(25," Confirm "),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",o.form))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.Nm,i.Ip,i.BC,i.ai,i.Je,i.el,l.qT,l.BC,l.cb,l.j4,l.JD],changeDetection:0}),a})()},{path:"**",redirectTo:""}];let z=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.iI.forChild(X),u.iI]}),a})(),Y=(()=>{var n;class a{}return(n=a).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[i.bv,f.MD,l.YN,z,l.X1]}),a})()}}]);