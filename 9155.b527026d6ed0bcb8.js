"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9155],{9155:(T,v,l)=>{l.r(v),l.d(v,{AuthModule:()=>$});var w=l(177),u=l(8160),r=l(4341),b=l(5558),e=l(4438),P=l(3769),_=l(3890),h=l(6279),p=l(9596),i=l(8974);let S=(()=>{var t;class a{constructor(o,n,c,d,m,g){this._formBuilder=o,this._authService=n,this._meService=c,this._router=d,this._loadingService=m,this._toastSavingService=g,this.showPassword=!1,this.form=this._formBuilder.nonNullable.group({email:["",[r.k0.required,r.k0.email]],password:["",r.k0.required]})}login(){this.form.invalid||(this._loadingService.showLoading(),this._authService.login(this.form.getRawValue()).subscribe({next:()=>this._meService.getMe().pipe((0,b.n)(()=>this._router.navigateByUrl("/tabs"))).subscribe(()=>this.form.reset()),error:()=>this._toastSavingService.showErrorWithMessage("Wrong credentials.")}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(P.u),e.rXU(_.Q),e.rXU(u.Ix),e.rXU(h.U),e.rXU(p.J))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:45,vars:5,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","formControlName","email","label","Email","labelPlacement","stacked","fill","outline","errorText","Please enter a valid email"],["mode","md","formControlName","password","label","Password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],[1,"mb-1","forgot-password"],["size","small","routerLink","/auth/password-forgot"],["type","submit","expand","block","color","primary",1,"m0-auto",3,"click"],[1,"divider"],[1,"social-media"],["expand","block"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"],["cx","12","cy","12","r","10"],["cx","12","cy","12","r","4"],["x1","21.17","x2","12","y1","8","y2","8"],["x1","3.95","x2","8.54","y1","6.06","y2","14"],["x1","10.88","x2","15.46","y1","21.94","y2","14"],["d","M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z"],["d","M10 2c1 .5 2 2 2 5"],[1,"mt-2"],["size","small","routerLink","/auth/signup",1,"signup"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Log in"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e.EFF(8,"Log in"),e.k0s()()(),e.j41(9,"p",4),e.EFF(10,"Log in to start planning your next trip."),e.k0s(),e.j41(11,"form",5),e.nrm(12,"ion-input",6),e.j41(13,"ion-input",7)(14,"ion-button",8),e.bIt("click",function(){return n.showPassword=!n.showPassword}),e.nrm(15,"ion-icon",9),e.k0s()(),e.j41(16,"ion-buttons",10)(17,"ion-button",11),e.EFF(18," Forgot Password? "),e.k0s()(),e.j41(19,"ion-button",12),e.bIt("click",function(){return n.login()}),e.EFF(20," Continue "),e.k0s()(),e.j41(21,"div",13)(22,"span"),e.EFF(23,"or"),e.k0s()(),e.j41(24,"div",14)(25,"ion-button",15),e.qSk(),e.j41(26,"svg",16),e.nrm(27,"path",17),e.k0s(),e.EFF(28," Continue with Facebook "),e.k0s(),e.joV(),e.j41(29,"ion-button",15),e.qSk(),e.j41(30,"svg",16),e.nrm(31,"circle",18)(32,"circle",19)(33,"line",20)(34,"line",21)(35,"line",22),e.k0s(),e.EFF(36," Continue with Google "),e.k0s(),e.joV(),e.j41(37,"ion-button",15),e.qSk(),e.j41(38,"svg",16),e.nrm(39,"path",23)(40,"path",24),e.k0s(),e.EFF(41," Continue with Apple "),e.k0s()(),e.joV(),e.j41(42,"ion-buttons",25)(43,"ion-button",26),e.EFF(44," You don't have an account? Sign up! "),e.k0s()()()),2&o&&(e.Y8G("translucent",!1),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("type",n.showPassword?"text":"password"),e.R7$(2),e.Y8G("name",n.showPassword?"eye":"eye-off"))},dependencies:[u.Wk,i.Jm,i.QW,i.W9,i.eU,i.iq,i.$w,i.BC,i.ai,i.Gw,i.N7,r.qT,r.BC,r.cb,r.j4,r.JD],styles:['.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:var(--ion-color-dark)}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--ion-color-light)}.divider[_ngcontent-%COMP%]:before{margin-right:.5rem}.divider[_ngcontent-%COMP%]:after{margin-left:.5rem}.signup[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]{text-decoration:underline;color:var(--ion-color-primary)}.signup[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .forgot-password[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0 0 0 auto;--padding-start: 0px}.social-media[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:.5rem}.social-media[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-dark)}.social-media[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:10px}'],changeDetection:0}),a})();var f=l(3477);let C=(()=>{var t;class a{constructor(o,n,c,d,m){this._formBuilder=o,this._authService=n,this._router=c,this._loadingService=d,this._toastSavingService=m,this.showPassword=!1,this.form=this._formBuilder.nonNullable.group({firstName:["",r.k0.required],lastName:["",r.k0.required],email:["",[r.k0.required,r.k0.email]],sex:["M",r.k0.required],password:["",[r.k0.required,r.k0.pattern(f.r)]],confirmPassword:["",r.k0.required]},{validators:f.R})}submit(){this.form.invalid?this.form.hasError("passwordMismatch")&&this._toastSavingService.showErrorWithMessage("The passwords don't match."):(this._loadingService.showLoading(),this._authService.signup(this.form.getRawValue()).subscribe({next:()=>{this.form.reset(),this._router.navigateByUrl("/auth/verification")},error:o=>{"email_already_exist"===o.error.title?this._toastSavingService.showErrorWithMessage("Already registered with this email."):this._toastSavingService.showError()}}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(P.u),e.rXU(u.Ix),e.rXU(h.U),e.rXU(p.J))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-signup"]],decls:32,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","type","text","formControlName","firstName","label","First Name","labelPlacement","stacked","fill","outline"],["mode","md","type","text","formControlName","lastName","label","Last Name","labelPlacement","stacked","fill","outline"],["mode","md","type","email","formControlName","email","label","Email","labelPlacement","stacked","fill","outline"],["mode","md","fill","outline","labelPlacement","stacked","label","Sex","formControlName","sex"],["value","M"],["value","F"],["value","O"],["mode","md","formControlName","password","label","Password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],[1,"hint"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm Password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Sign up"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Sign up"),e.k0s()()(),e.j41(11,"p",6),e.EFF(12,"Create an account and start planning your next trip."),e.k0s(),e.j41(13,"form",7),e.nrm(14,"ion-input",8)(15,"ion-input",9)(16,"ion-input",10),e.j41(17,"ion-select",11)(18,"ion-select-option",12),e.EFF(19,"Male"),e.k0s(),e.j41(20,"ion-select-option",13),e.EFF(21,"Female"),e.k0s(),e.j41(22,"ion-select-option",14),e.EFF(23,"Other"),e.k0s()(),e.j41(24,"ion-input",15)(25,"ion-button",16),e.bIt("click",function(){return n.showPassword=!n.showPassword}),e.nrm(26,"ion-icon",17),e.k0s()(),e.j41(27,"ion-text",18),e.EFF(28," The password must have one uppercase letter, one lowercase letter, one number and one special character. "),e.k0s(),e.nrm(29,"ion-input",19),e.j41(30,"ion-button",20),e.bIt("click",function(){return n.submit()}),e.EFF(31," Sign up "),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("formGroup",n.form),e.R7$(11),e.Y8G("type",n.showPassword?"text":"password"),e.R7$(2),e.Y8G("name",n.showPassword?"eye":"eye-off"))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.iq,i.$w,i.Nm,i.Ip,i.IO,i.BC,i.ai,i.Je,i.Gw,i.el,r.qT,r.BC,r.cb,r.j4,r.JD],changeDetection:0}),a})();var k=l(8673),y=l(1626);let j=(()=>{var t;class a{constructor(o,n){this._httpClient=o,this._basePath=n,this._endpoint=`${this._basePath}/v1/user/confirmation-email`}getConfirmationEmail(){return this._httpClient.get(this._endpoint)}verifyIdentity(o){return this._httpClient.post(this._endpoint,o)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.KVO(y.Qq),e.KVO(k.o2))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})(),E=(()=>{var t;class a{constructor(o,n,c,d,m,g){this._formBuilder=o,this._meService=n,this._verificationService=c,this._router=d,this._loadingService=m,this._toastSavingService=g,this.form=this._formBuilder.nonNullable.group({code:["",r.k0.pattern(/^[0-9]{6}$/)]}),this._verificationService.getConfirmationEmail().subscribe()}submit(){this.form.invalid||(this._loadingService.showLoading(),this._verificationService.verifyIdentity(this.form.getRawValue()).subscribe({next:()=>this._meService.getMe().pipe((0,b.n)(()=>this._router.navigateByUrl("/tabs"))).subscribe(()=>this.form.reset()),error:o=>this._handleError(o)}).add(()=>this._loadingService.hideLoading()))}_handleError(o){"confirmation_code_not_valid"===o.error.title?this._toastSavingService.showErrorWithMessage("The code is not valid. Please try again."):this._toastSavingService.showError()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(_.Q),e.rXU(j),e.rXU(u.Ix),e.rXU(h.U),e.rXU(p.J))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-verification"]],decls:20,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","medium"],[1,"subtitle"],[1,"form",3,"formGroup"],["mode","md","type","text","formControlName","code","label","Verification code","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Confirm your identity"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Insert the code"),e.k0s()()(),e.j41(11,"p",6),e.EFF(12," Hey there! Could you please enter the code we've sent to your "),e.j41(13,"b"),e.EFF(14,"email"),e.k0s(),e.EFF(15,"? It's just to make sure it's really you. "),e.k0s(),e.j41(16,"form",7),e.nrm(17,"ion-input",8),e.j41(18,"ion-button",9),e.bIt("click",function(){return n.submit()}),e.EFF(19," Verify "),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(10),e.Y8G("formGroup",n.form))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.$w,i.BC,i.ai,i.Gw,i.el,r.qT,r.BC,r.cb,r.j4,r.JD],changeDetection:0}),a})();var x=l(8660),R=l(4412);let F=(()=>{var t;class a{constructor(o,n){this._httpClient=o,this._basePath=n,this._endpoint=`${this._basePath}/v1/user/password`}getResetPasswordCode(o){return this._httpClient.post(`${this._endpoint}/reset-code`,o)}resetPassword(o){return this._httpClient.post(`${this._endpoint}/reset`,o)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.KVO(y.Qq),e.KVO(k.o2))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();function M(t,a){1&t&&(e.j41(0,"p",6)(1,"b"),e.EFF(2,"Great job!"),e.k0s(),e.EFF(3," We've just sent a link to your email. Please check your inbox and follow the instructions to reset your password. You'll be back in no time! "),e.k0s())}function U(t,a){if(1&t){const s=e.RV6();e.j41(0,"p",6),e.EFF(1," We're here to help! Please type in your email address. We'll promptly send you a link to reset your password. Hang tight! "),e.k0s(),e.j41(2,"form",7),e.bIt("ngSubmit",function(){e.eBV(s);const n=e.XpG();return e.Njj(n.resetCode())}),e.nrm(3,"ion-input",8),e.j41(4,"ion-button",9),e.EFF(5," Send Reset Code "),e.k0s()()}if(2&t){const s=e.XpG();e.R7$(2),e.Y8G("formGroup",s.form)}}function V(t,a){if(1&t){const s=e.RV6();e.j41(0,"p",6),e.EFF(1," Almost there! Now, please create a new password. Make sure it's something secure that you'll remember. Let's get you back on track! "),e.k0s(),e.j41(2,"form",7),e.bIt("ngSubmit",function(){e.eBV(s);const n=e.XpG();return e.Njj(n.resetPassword())}),e.j41(3,"ion-input",8)(4,"ion-button",9),e.bIt("click",function(){e.eBV(s);const n=e.XpG();return e.Njj(n.showPassword=!n.showPassword)}),e.nrm(5,"ion-icon",10),e.k0s()(),e.nrm(6,"ion-input",11),e.j41(7,"ion-button",12),e.EFF(8," Confirm "),e.k0s()()}if(2&t){const s=e.XpG();e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(),e.Y8G("type",s.showPassword?"text":"password"),e.R7$(2),e.Y8G("name",s.showPassword?"eye":"eye-off")}}function B(t,a){1&t&&(e.j41(0,"p",6),e.EFF(1," Oops! It seems like we couldn't find a code to reset your password. Please make sure you've entered the correct code that we sent to your email. If you're still having trouble, don't worry! You can request a new code and we'll send it right away. Hang in there! "),e.k0s())}const X=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:S},{path:"signup",component:C},{path:"password-forgot",component:(()=>{var t;class a{constructor(o,n,c,d){this._formBuilder=o,this._loadingService=n,this._toastSavingService=c,this._resetPasswordService=d,this.sent$=new R.t(!1),this.form=this._formBuilder.nonNullable.group({email:["",[r.k0.required,r.k0.email]]})}resetCode(){this.form.invalid||(this._loadingService.showLoading(),this._resetPasswordService.getResetPasswordCode(this.form.getRawValue()).subscribe({next:()=>this.sent$.next(!0),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading()))}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(h.U),e.rXU(p.J),e.rXU(F))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-password-forgot"]],decls:14,vars:5,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"ngSubmit","formGroup"],["mode","md","type","email","formControlName","email","label","Email","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary",1,"mx-auto","mt-1"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Forgot Password?"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Forgot Password?"),e.k0s()()(),e.DNE(11,M,4,0,"p",6),e.nI1(12,"async"),e.DNE(13,U,6,1),e.k0s()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(5),e.vxM(11,e.bMT(12,3,n.sent$)?11:13))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.$w,i.BC,i.ai,i.Gw,i.el,r.qT,r.BC,r.cb,r.j4,r.JD,w.Jj],changeDetection:0}),a})()},{path:"reset-password",component:(()=>{var t;class a{constructor(o,n,c,d,m,g){this._formBuilder=o,this._router=n,this._activatedRouter=c,this._loadingService=d,this._toastSavingService=m,this._resetPasswordService=g,this.showPassword=!1,this.code=this._activatedRouter.snapshot.queryParams.code,this.form=this._formBuilder.nonNullable.group({password:["",[r.k0.required,r.k0.pattern(f.r)]],confirmPassword:["",r.k0.required]},{validators:f.R})}resetPassword(){this.form.invalid||(this._loadingService.showLoading(),this._resetPasswordService.resetPassword({...this.form.getRawValue(),code:this.code}).subscribe({next:()=>this._router.navigateByUrl("/auth/login").then(()=>this.form.reset()),error:o=>this._handleError(o)}).add(()=>this._loadingService.hideLoading()))}_handleError(o){400===o.status?this._toastSavingService.showErrorWithMessage("Invalid reset code"):this._toastSavingService.showError()}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(u.Ix),e.rXU(u.nX),e.rXU(h.U),e.rXU(p.J),e.rXU(F))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-password-forgot"]],decls:13,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/auth/login"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"ngSubmit","formGroup"],["mode","md","autocomplete","new-password","formControlName","password","label","New password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary"]],template:function(o,n){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Reset password"),e.k0s()()(),e.j41(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e.EFF(10,"Reset Password"),e.k0s()()(),e.DNE(11,V,9,3)(12,B,2,0),e.k0s()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(5),e.vxM(11,n.code?11:12))},dependencies:[i.Jm,i.QW,i.W9,i.eU,i.iq,i.$w,i.BC,i.ai,i.Gw,i.el,r.qT,r.BC,r.cb,r.j4,r.JD],changeDetection:0}),a})()},{path:"verification",canActivate:[x.h],component:E}];let N=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.iI.forChild(X),u.iI]}),a})(),$=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[w.MD,N,i.bv,r.X1]}),a})()}}]);