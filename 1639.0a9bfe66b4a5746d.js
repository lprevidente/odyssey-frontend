"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1639],{1639:(B,Z,c)=>{c.r(Z),c.d(Z,{ProfilePageModule:()=>R});var i=c(1929),d=c(6814),l=c(95),u=c(2436),A=c(5861),U=c(6232),e=c(9212),f=c(4925),g=c(9862);let m=(()=>{var n;class r{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/profile`}getProfile(){return this._httpClient.get(this._endpoint)}updateProfile(t){return this._httpClient.put(this._endpoint,t)}deleteProfile(){return this._httpClient.delete(this._endpoint)}}return(n=r).\u0275fac=function(t){return new(t||n)(e.LFG(g.eN),e.LFG(f.GW))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var C=c(3721),S=c(5619),b=c(9397),h=c(8645);let x=(()=>{var n;class r{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/avatar`}uploadAvatar(t){const o=new FormData;return o.append("file",t),this._httpClient.post(this._endpoint,o,{responseType:"text"})}deleteAvatar(){return this._httpClient.delete(this._endpoint)}}return(n=r).\u0275fac=function(t){return new(t||n)(e.LFG(g.eN),e.LFG(f.GW))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var _=c(3860);const T=["fileInput"];let M=(()=>{var n;class r{constructor(t,o){this._avatarService=t,this._toastSavingService=o,this.imageChanged=new e.vpe,this.openActions$=new h.x,this.profilePictureUrl$=new h.x,this._profile={}}get actionSheetButtons(){const t=[{text:"Upload",role:"upload"},{text:"Cancel",role:"cancel"}];return this._profile.avatarURL?[{text:"Delete",role:"destructive"},...t]:t}openActionSheet(){this.openActions$.next(!0)}ngOnInit(){this.profile$.pipe((0,b.b)(t=>this._profile=t)).subscribe(()=>this._avatarURL())}actionResult(t){"destructive"===t.detail.role?this._avatarService.deleteAvatar().subscribe({next:()=>{this._toastSavingService.showSaved(),this.profilePictureUrl$.next(this._getAvatarPlaceholder())},error:()=>this._toastSavingService.showError()}):"upload"===t.detail.role&&this.changeAvatar(),this.openActions$.next(!1)}_avatarURL(){var t;const o=null!==(t=this._profile.avatarURL)&&void 0!==t?t:this._getAvatarPlaceholder();this.profilePictureUrl$.next(o)}_getAvatarPlaceholder(){return`https://ui-avatars.com/api/?name=${this._profile.firstName}+${this._profile.lastName}&size=256&background=${"F"===this._profile.sex?"FFC0CB":"87CEEB"}`}changeAvatar(){this._fileInput.nativeElement.click()}onFileSelected(t){const o=t.target.files[0];o&&this._avatarService.uploadAvatar(o).subscribe({next:s=>{this._toastSavingService.showSaved(),this.profilePictureUrl$.next(s)},error:()=>this._toastSavingService.showError()})}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(_.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-avatar"]],viewQuery:function(t,o){if(1&t&&e.Gf(T,5),2&t){let s;e.iGM(s=e.CRH())&&(o._fileInput=s.first)}},inputs:{profile$:"profile$",size:"size"},outputs:{imageChanged:"imageChanged"},decls:9,vars:11,consts:[[1,"avatar-container","ion-activatable",3,"click"],["alt","avatar",1,"avatar-image",3,"src"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["name","pencil",1,"edit-icon"],["header","Actions",3,"isOpen","buttons","didDismiss"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return o.openActionSheet()}),e._UZ(1,"ion-ripple-effect")(2,"img",1),e.ALo(3,"async"),e.TgZ(4,"input",2,3),e.NdJ("change",function(p){return o.onFileSelected(p)}),e.qZA(),e._UZ(6,"ion-icon",4),e.qZA(),e.TgZ(7,"ion-action-sheet",5),e.NdJ("didDismiss",function(p){return o.actionResult(p)}),e.ALo(8,"async"),e.qZA()),2&t&&(e.Udp("width",o.size)("height",o.size),e.xp6(2),e.Q6J("src",e.lcZ(3,7,o.profilePictureUrl$),e.LSH),e.xp6(5),e.Q6J("isOpen",!0===e.lcZ(8,9,o.openActions$))("buttons",o.actionSheetButtons))},dependencies:[i.uo,i.gu,i.H$,d.Ov],styles:[".avatar-container[_ngcontent-%COMP%]{position:relative;overflow:hidden;cursor:pointer}.avatar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:95%;height:95%;border-radius:50%;object-fit:cover;box-shadow:0 2px 4px #0000001a}.avatar-container[_ngcontent-%COMP%]   .edit-icon[_ngcontent-%COMP%]{box-shadow:0 2px 4px #0000001a;position:absolute;bottom:2px;right:0;background-color:#fff;border-radius:50%;padding:4px;font-size:16px;color:#333}"]}),r})();function O(n,r){1&n&&(e.TgZ(0,"ion-text")(1,"p",3),e._uU(2),e.qZA(),e.TgZ(3,"p",4),e._uU(4),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",r.firstName+" "+r.lastName," "),e.xp6(2),e.Oqu(r.email))}let q=(()=>{var n;class r{constructor(t){this._profileService=t,this.profile$=new S.X({}),this.profilePictureUrl$=new S.X(""),this._getProfile()}_getProfile(){this._profileService.getProfile().pipe((0,b.b)(t=>this._avatarURL(t))).subscribe(t=>this.profile$.next(t))}_avatarURL(t){const o=t.avatarURL||this._getAvatarPlaceholder(t);this.profilePictureUrl$.next(o)}_getAvatarPlaceholder(t){return`https://ui-avatars.com/api/?name=${t.firstName}+${t.lastName}&size=256&background=${"F"===t.sex?"FFC0CB":"87CEEB"}`}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(m))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile-info"]],decls:5,vars:4,consts:[[1,"profile-container"],[1,"profile-info"],["size","60px",3,"profile$"],[1,"full-name"],[1,"see-profile"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-avatar",2),e.YNc(3,O,5,2,"ion-text"),e.ALo(4,"async"),e.qZA()()),2&t){let s;e.xp6(2),e.Q6J("profile$",o.profile$),e.xp6(1),e.um2(3,(s=e.lcZ(4,2,o.profile$))?3:-1,s)}},dependencies:[i.yW,M,d.Ov],styles:['.profile-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{flex:1 auto}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{margin-bottom:0!important}.profile-info[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]   .see-profile[_ngcontent-%COMP%]{margin-top:5px!important;color:var(--ion-color-medium-tint)}.profile-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{width:25.6px;margin-right:10px}.profile-container[_ngcontent-%COMP%]{padding:15px}.profile-container[_ngcontent-%COMP%]:after{margin-top:5px;content:"";display:block;border-bottom:1px solid var(--ion-color-light)}'],changeDetection:0}),r})(),L=(()=>{var n;class r{constructor(t,o,s){this._profileService=t,this._authService=o,this._router=s,this.profile$=U.E}ionViewWillEnter(){this.profile$=this._profileService.getProfile()}logout(){var t=this;return(0,A.Z)(function*(){t._authService.logout().subscribe().add(()=>t._router.navigate(["/auth/login"]))})()}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(C.e),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:36,vars:2,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],["routerLink","/tabs/profile/personal-information"],["name","person-circle-outline"],["routerLink","/tabs/profile/notifications"],["name","notifications-outline"],["routerLink","/tabs/profile/app-settings"],["name","settings-outline"],["routerLink","/tabs/profile/security"],["name","shield-outline"],[1,"footer"],["slot","end",1,"logout"],[3,"click"],[1,"app-version"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Profile"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e._uU(8,"Profile"),e.qZA()()(),e._UZ(9,"app-profile-info"),e.TgZ(10,"ion-list")(11,"ion-list-header")(12,"ion-label"),e._uU(13,"Settings"),e.qZA()(),e.TgZ(14,"ion-item",4),e._UZ(15,"ion-icon",5),e.TgZ(16,"ion-label"),e._uU(17,"Personal Information"),e.qZA()(),e.TgZ(18,"ion-item",6),e._UZ(19,"ion-icon",7),e.TgZ(20,"ion-label"),e._uU(21,"Notifications"),e.qZA()(),e.TgZ(22,"ion-item",8),e._UZ(23,"ion-icon",9),e.TgZ(24,"ion-label"),e._uU(25,"App Settings"),e.qZA()(),e.TgZ(26,"ion-item",10),e._UZ(27,"ion-icon",11),e.TgZ(28,"ion-label"),e._uU(29,"Security"),e.qZA()()(),e.TgZ(30,"div",12)(31,"ion-buttons",13)(32,"ion-button",14),e.NdJ("click",function(){return o.logout()}),e._uU(33,"Logout"),e.qZA()(),e.TgZ(34,"p",15),e._uU(35,"App Version 1.0.0"),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.gu,i.Ie,i.Q$,i.q_,i.yh,i.wd,i.sr,i.YI,u.rH,q],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}.footer[_ngcontent-%COMP%]{padding:30px 15px}.footer[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{text-decoration:underline;color:var(--ion-color-primary)}.footer[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 0px}.footer[_ngcontent-%COMP%]   .app-version[_ngcontent-%COMP%]{margin-top:30px;font-weight:200;font-size:12px;color:var(--ion-color-medium)!important}"]}),r})();var v=c(63);let N=(()=>{var n;class r{constructor(t,o,s,p){this._formBuilder=t,this._profileService=o,this._loadingService=s,this._toastSavingService=p,this.form=this._formBuilder.nonNullable.group({firstName:["",l.kI.required],lastName:["",l.kI.required],email:["",[l.kI.required,l.kI.email]],sex:new l.NI("M",{nonNullable:!0,validators:l.kI.required})}),this._profileService.getProfile().subscribe(P=>this.form.patchValue(P))}saveChanges(){this.form.invalid||(this._loadingService.showLoading(),this._profileService.updateProfile(this.form.getRawValue()).subscribe({next:()=>this._toastSavingService.showSaved(),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading()))}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(m),e.Y36(v.b),e.Y36(_.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-personal-information"]],decls:26,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup","ngSubmit"],["mode","md","formControlName","firstName","label","First name","labelPlacement","stacked","fill","outline"],["mode","md","formControlName","lastName","label","Last name","labelPlacement","stacked","fill","outline"],["mode","md","formControlName","email","type","email","label","Email","labelPlacement","stacked","errorText","Enter a valid email","fill","outline"],["mode","md","fill","outline","labelPlacement","stacked","label","Sex","formControlName","sex"],["value","M"],["value","F"],["value","O"],["type","submit","expand","block","color","primary",1,"mt-1"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Personal Info"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Personal info"),e.qZA()()(),e.TgZ(11,"p",6),e._uU(12," Here there are your personal information, that you can edit. "),e.qZA(),e.TgZ(13,"form",7),e.NdJ("ngSubmit",function(){return o.saveChanges()}),e._UZ(14,"ion-input",8)(15,"ion-input",9)(16,"ion-input",10),e.TgZ(17,"ion-select",11)(18,"ion-select-option",12),e._uU(19,"Male"),e.qZA(),e.TgZ(20,"ion-select-option",13),e._uU(21,"Female"),e.qZA(),e.TgZ(22,"ion-select-option",14),e._uU(23,"Other"),e.qZA()(),e.TgZ(24,"ion-button",15),e._uU(25," Confirm "),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("formGroup",o.form))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.pK,i.t9,i.n0,i.wd,i.sr,i.QI,i.j9,i.oU,l._Y,l.JJ,l.JL,l.sg,l.u]}),r})(),$=(()=>{var n;class r{constructor(){}ngOnInit(){}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-notifications"]],decls:13,vars:2,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Notifications"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Notifications"),e.qZA()()(),e.TgZ(11,"h5"),e._uU(12,"Work in progress!"),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0))},dependencies:[i.Sm,i.W2,i.Gu,i.wd,i.sr,i.oU]}),r})(),F=(()=>{var n;class r{constructor(){}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-device-history"]],decls:29,vars:0,consts:[[1,"device-history"],[1,"text-bold"],[1,"device-history-item"],["size","large","name","laptop-outline"],[1,"device"],[1,"operating-system"],[1,"browser"],[1,"location-time"],[1,"location"],[1,"time"],["size","large","name","phone-portrait-outline"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Device history"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"ion-icon",3),e.TgZ(5,"div")(6,"div",4)(7,"p",5),e._uU(8,"OS X 10.15.7"),e.qZA(),e.TgZ(9,"p",6),e._uU(10,"Safari"),e.qZA()(),e.TgZ(11,"div",7)(12,"span",8),e._uU(13,"Orta di Atella, Campania"),e.qZA(),e.TgZ(14,"span",9),e._uU(15,"Today, 10:30 AM"),e.qZA()()()(),e.TgZ(16,"div",2),e._UZ(17,"ion-icon",10),e.TgZ(18,"div")(19,"div",4)(20,"p",5),e._uU(21,"OS X 10.15.7"),e.qZA(),e.TgZ(22,"p",6),e._uU(23,"Safari"),e.qZA()(),e.TgZ(24,"div",7)(25,"span",8),e._uU(26,"Orta di Atella, Campania"),e.qZA(),e.TgZ(27,"span",9),e._uU(28,"Today, 10:30 AM"),e.qZA()()()()())},dependencies:[i.gu],styles:['@charset "UTF-8";.device-history[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .operating-system[_ngcontent-%COMP%]{font-size:17px;font-weight:700}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .operating-system[_ngcontent-%COMP%]:after{content:"  \\2022   "}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .device[_ngcontent-%COMP%]   .browser[_ngcontent-%COMP%]{font-weight:200}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]:after{content:"  \\2022   "}.device-history[_ngcontent-%COMP%]   .device-history-item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:15px;font-weight:200}'],changeDetection:0}),r})();var w=c(8046),y=c(7398);let I=(()=>{var n;class r{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/password`}getLastUpdatePassword(){return this._httpClient.get(`${this._endpoint}/last-update`)}updatePassword(t){return this._httpClient.put(this._endpoint,t)}}return(n=r).\u0275fac=function(t){return new(t||n)(e.LFG(g.eN),e.LFG(f.GW))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();function J(n,r){if(1&n){const a=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Change Password"),e.qZA(),e.TgZ(4,"ion-buttons",7)(5,"ion-button",8),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.openModal$.next(!1))}),e._uU(6,"Close"),e.qZA()()()(),e.TgZ(7,"ion-content",9)(8,"form",10),e.NdJ("ngSubmit",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.changePassword())}),e._UZ(9,"ion-input",11),e.TgZ(10,"ion-input",12)(11,"ion-button",13),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.showPassword=!o.showPassword)}),e._UZ(12,"ion-icon",14),e.qZA()(),e._UZ(13,"ion-input",15),e.TgZ(14,"ion-button",16),e._uU(15," Confirm "),e.qZA()()()}if(2&n){const a=e.oxw();e.xp6(8),e.Q6J("formGroup",a.form),e.xp6(2),e.Q6J("type",a.showPassword?"text":"password"),e.xp6(2),e.Q6J("name",a.showPassword?"eye":"eye-off")}}let k=(()=>{var n;class r{constructor(t,o,s,p){this._formBuilder=t,this._loadingService=o,this._passwordService=s,this._toastSavingService=p,this.showPassword=!1,this.lastUpdatePassword$=new h.x,this.openModal$=new h.x,this.form=this._formBuilder.nonNullable.group({oldPassword:["",l.kI.required],password:["",[l.kI.required,l.kI.pattern(w.L)]],confirmPassword:["",l.kI.required]},{validators:w.C}),this._getLasUpdatePassword()}_getLasUpdatePassword(){this._passwordService.getLastUpdatePassword().pipe((0,y.U)(t=>this._timeAgo(t.lastUpdate))).subscribe(t=>this.lastUpdatePassword$.next(t))}_timeAgo(t){const o=Math.floor(((new Date).getTime()-new Date(t).getTime())/1e3);let s=o/31536e3;const p=new Intl.RelativeTimeFormat("en",{numeric:"auto"});return s>1?p.format(-Math.floor(s),"year"):(s=o/2592e3,s>1?p.format(-Math.floor(s),"month"):(s=o/86400,s>1?p.format(-Math.floor(s),"day"):(s=o/3600,s>1?p.format(-Math.floor(s),"hour"):(s=o/60,p.format(-Math.floor(s),s>1?"minute":"second")))))}changePassword(){this.form.invalid?this.form.hasError("passwordMismatch")&&this._toastSavingService.showErrorWithMessage("The passwords don't match."):(this._loadingService.showLoading(),this._passwordService.updatePassword(this.form.getRawValue()).subscribe({next:()=>{this.form.reset(),this._toastSavingService.showSaved(),this.openModal$.next(!1),this._getLasUpdatePassword()},error:t=>{400===t.status?this._toastSavingService.showErrorWithMessage("The old password is incorrect"):this._toastSavingService.showError()}}).add(()=>this._loadingService.hideLoading()))}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(v.b),e.Y36(I),e.Y36(_.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-last-update-password"]],decls:15,vars:6,consts:[[1,"text-bold"],[1,"mt-2"],[1,"password"],["slot","end",1,"logout"],[1,"text-underlined",3,"click"],[1,"description"],[3,"isOpen"],["slot","end"],[3,"click"],[1,"ion-padding"],[1,"form",3,"formGroup","ngSubmit"],["mode","md","autocomplete","password","formControlName","oldPassword","label","Current password","labelPlacement","stacked","fill","outline"],["mode","md","autocomplete","new-password","formControlName","newPassword","label","New password","labelPlacement","stacked","fill","outline",3,"type"],["fill","clear","slot","end","aria-label","Show/hide",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["mode","md","type","password","formControlName","confirmPassword","label","Confirm password","labelPlacement","stacked","fill","outline"],["type","submit","expand","block","color","primary"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Login"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"h5",0),e._uU(5,"Password"),e.qZA(),e.TgZ(6,"ion-buttons",3)(7,"ion-button",4),e.NdJ("click",function(){return o.openModal$.next(!0)}),e._uU(8," Change "),e.qZA()()(),e.TgZ(9,"p",5),e._uU(10),e.ALo(11,"async"),e.qZA()(),e.TgZ(12,"ion-modal",6),e.ALo(13,"async"),e.YNc(14,J,16,3,"ng-template"),e.qZA()),2&t&&(e.xp6(10),e.hij(" Last updated password ",e.lcZ(11,2,o.lastUpdatePassword$),". "),e.xp6(2),e.Q6J("isOpen",!0===e.lcZ(13,4,o.openModal$)))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.gu,i.pK,i.wd,i.sr,i.ki,i.j9,l._Y,l.JJ,l.JL,l.sg,l.u,d.Ov],styles:[".description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.password[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"],changeDetection:0}),r})();var Y=c(4664);let G=(()=>{var n;class r{constructor(t,o,s){this._profileService=t,this._authService=o,this._router=s,this.actionSheetButtons=[{text:"Delete",role:"destructive",data:{action:"delete"}},{text:"Cancel",role:"cancel",data:{action:"cancel"}}]}deleteProfile(){this._profileService.deleteProfile().pipe((0,Y.w)(()=>this._authService.logout()),(0,y.U)(()=>this._router.navigate(["/auth/login"]))).subscribe()}actionResult(t){"destructive"===t.detail.role&&this.deleteProfile()}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(m),e.Y36(C.e),e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-account"]],decls:10,vars:1,consts:[[1,"text-bold"],[1,"mt-2"],[1,"container"],[1,"description"],["slot","end",1,"logout"],["id","open-action-sheet","color","danger",1,"text-underlined"],["trigger","open-action-sheet","header","Actions",3,"buttons","didDismiss"]],template:function(t,o){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Account"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"p",3),e._uU(5,"Delete your account"),e.qZA(),e.TgZ(6,"ion-buttons",4)(7,"ion-button",5),e._uU(8," Delete "),e.qZA()()()(),e.TgZ(9,"ion-action-sheet",6),e.NdJ("didDismiss",function(p){return o.actionResult(p)}),e.qZA()),2&t&&(e.xp6(9),e.Q6J("buttons",o.actionSheetButtons))},dependencies:[i.uo,i.YG,i.Sm],styles:["description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"],changeDetection:0}),r})(),D=(()=>{var n;class r{constructor(){}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-security"]],decls:16,vars:2,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"divider"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Security"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"Security"),e.qZA()()(),e._UZ(11,"app-last-update-password")(12,"div",6)(13,"app-device-history")(14,"div",6)(15,"app-delete-account"),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0))},dependencies:[i.Sm,i.W2,i.Gu,i.wd,i.sr,i.oU,F,k,G],styles:['.description[_ngcontent-%COMP%]{font-size:15px;font-weight:400}.password[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid var(--ion-color-light)}']}),r})(),z=(()=>{var n;class r{constructor(t,o){this._httpClient=t,this._basePath=o,this._endpoint=`${this._basePath}/v1/user/app-settings`}getAppSettings(){return this._httpClient.get(this._endpoint)}updateAppSettings(t){return this._httpClient.put(this._endpoint,t)}}return(n=r).\u0275fac=function(t){return new(t||n)(e.LFG(g.eN),e.LFG(f.GW))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();const Q=[{path:"",pathMatch:"full",component:L},{path:"personal-information",component:N},{path:"security",component:D},{path:"notifications",component:$},{path:"app-settings",component:(()=>{var n;class r{constructor(t,o,s,p){this._formBuilder=t,this._loadingService=o,this._toastSavingService=s,this._appSettingsService=p,this.form=this._formBuilder.group({language:["en-US"],currency:["EUR"]}),this._appSettingsService.getAppSettings().subscribe(P=>this.form.patchValue(P))}updateSettings(){this._loadingService.showLoading(),this._appSettingsService.updateAppSettings(this.form.getRawValue()).subscribe({next:()=>this._toastSavingService.showSaved(),error:()=>this._toastSavingService.showError()}).add(()=>this._loadingService.hideLoading())}}return(n=r).\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(v.b),e.Y36(_.c),e.Y36(z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-app-settings"]],decls:26,vars:3,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tabs/profile"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[1,"subtitle"],[1,"form",3,"formGroup","ngSubmit"],["mode","md","fill","outline","labelPlacement","stacked","label","Language","formControlName","language"],["value","it-IT"],["value","en-US"],["mode","md","fill","outline","labelPlacement","stacked","label","Currency","formControlName","currency"],["value","EUR"],["value","USD"],["type","submit","expand","block","color","primary",1,"mt-1"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"App settings"),e.qZA()()(),e.TgZ(6,"ion-content",3)(7,"ion-header",4)(8,"ion-toolbar")(9,"ion-title",5),e._uU(10,"App settings"),e.qZA()()(),e.TgZ(11,"p",6),e._uU(12," Here you can change your app settings, like language and currency "),e.qZA(),e.TgZ(13,"form",7),e.NdJ("ngSubmit",function(){return o.updateSettings()}),e.TgZ(14,"ion-select",8)(15,"ion-select-option",9),e._uU(16,"Italian"),e.qZA(),e.TgZ(17,"ion-select-option",10),e._uU(18,"English (American)"),e.qZA()(),e.TgZ(19,"ion-select",11)(20,"ion-select-option",12),e._uU(21,"\u20ac Euro"),e.qZA(),e.TgZ(22,"ion-select-option",13),e._uU(23,"$ US Dollar"),e.qZA()(),e.TgZ(24,"ion-button",14),e._uU(25," Confirm "),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(6),e.Q6J("fullscreen",!0),e.xp6(7),e.Q6J("formGroup",o.form))},dependencies:[i.YG,i.Sm,i.W2,i.Gu,i.t9,i.n0,i.wd,i.sr,i.QI,i.oU,l._Y,l.JJ,l.JL,l.sg,l.u],changeDetection:0}),r})()},{path:"**",redirectTo:""}];let E=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.Bz.forChild(Q),u.Bz]}),r})(),R=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[i.Pc,d.ez,l.u5,E,l.UX]}),r})()}}]);